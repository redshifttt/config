#!/bin/bash
# the simple screengrabber (now wayland native)

sel(){
    selection=$(slurp)
    grim -g "${selection}" - | wl-copy
    wl-paste > "$pics_dir/$file_format.png"
}

folder_format=$(date +'%Y/%m %B/%d' | tr "[:upper:]" "[:lower:]")
file_format=$(date +'%F_%H-%M-%S')

pics_dir="$HOME/images/screenshots/$folder_format"

[[ ! -d "$pics_dir" ]] && mkdir -p "$pics_dir"

case "$1" in
    -s) sel ;; # region
    *) sel ;; # default action
esac
